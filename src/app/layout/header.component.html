<nav class="navbar navbar-expand-lg main-navbar fixed-top">
  <div class="container">

    <div class="collapse navbar-collapse d-none d-lg-flex">

      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link" routerLink="/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
            Home
          </a>
        </li>

        <li class="nav-item dropdown dropdown-mega">
          <a class="nav-link dropdown-toggle" href="#" routerLink="/alunos" routerLinkActive="active" data-bs-toggle="dropdown" aria-expanded="false">
            Alunos
          </a>
          <div class="dropdown-menu dropdown-menu-mega">
            <div class="container">
              <div class="row">
                <div class="col-lg-4">
                  <h6 class="dropdown-header">Navegação</h6>
                  <a class="dropdown-item" routerLink="/alunos">
                    Buscar Alunos
                  </a>
                  <a class="dropdown-item" routerLink="/alunos/novo">
                    Cadastrar Aluno
                  </a>
                </div>
              </div>
            </div>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/relatorios" routerLinkActive="active">
            Relatórios
          </a>
        </li>

        <li class="nav-item dropdown dropdown-mega">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Administração
          </a>
          <div class="dropdown-menu dropdown-menu-mega">
            <div class="container">
              <div class="row">
                <div class="col-lg-4">
                  <h6 class="dropdown-header">Acadêmico</h6>
                  <a class="dropdown-item" routerLink="/cursos">
                    Gerenciar Cursos
                  </a>
                  <a class="dropdown-item" routerLink="/turmas">
                    Gerenciar Turmas
                  </a>
                </div>
                <div class="col-lg-4">
                  <h6 class="dropdown-header">Configurações NAAPI</h6>
                  <a class="dropdown-item" routerLink="/diagnosticos">
                    Diagnósticos
                  </a>
                  <a class="dropdown-item" routerLink="/tipos-atendimento">
                    Tipos de Atendimento
                  </a>
                </div>
                <div class="col-lg-4">
                  <h6 class="dropdown-header">Geral</h6>
                  <a class="dropdown-item" routerLink="/usuarios">
                    Gerenciar Usuários
                  </a>
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>

      <a class="navbar-brand d-flex align-items-center mx-auto" routerLink="/dashboard">
        <img src="assets/img/CEFET-MG_simplificada-positivo-menor.png" alt="Logo CEFET" class="navbar-logo-cefet">
        <div class="logo">
          <div class="n-parent">
            <b class="a">N</b>
            <b class="a">A</b>
            <b class="a">A</b>
            <b class="a">P</b>
            <b class="a">I</b>
          </div>
        </div>
      </a>
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item dropdown navbar-profile" *ngIf="currentUser$ | async as user">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-person"></i>
            <span class="d-none d-xl-inline ms-2">
              <small>Olá,</small>
              {{ user.nome }}
            </span>
          </a>
          <ul class="dropdown-menu dropdown-menu-end profile-dropdown-menu">
            <li>
              <a class="dropdown-item" routerLink="/perfil">
                <i class="bi bi-person-lines-fill me-2"></i>
                <span>Ver perfil</span>
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item" (click)="logout()">
                <i class="bi bi-box-arrow-right me-2"></i>
                <span>Sair</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </div>

    <div class="d-lg-none d-flex justify-content-between w-100 align-items-center">
      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#naapiOffcanvasMenu" aria-controls="naapiOffcanvasMenu">
        <i class="bi bi-list"></i>
      </button>
      <a class="navbar-brand d-flex align-items-center" routerLink="/dashboard">
        <img src="assets/img/CEFET-MG_simplificada-positivo-menor.png" alt="Logo CEFET" class="navbar-logo-cefet">
        <div class="logo">
          <div class="n-parent">
            <b class="a">N</b>
            <b class="a">A</b>
            <b class="a">A</b>
            <b class="a">P</b>
            <b class="a">I</b>
          </div>
        </div>
      </a>
      <div style="width: 50px;"></div>
    </div>
  </div>
</nav>

<div class="offcanvas offcanvas-start" tabindex="-1" id="naapiOffcanvasMenu" aria-labelledby="naapiOffcanvasMenuLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="naapiOffcanvasMenuLabel">Menu</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>

  <div class="offcanvas-body">
    <ul class="navbar-nav offcanvas-nav-links">
      <li class="nav-item">
        <a class="nav-link" routerLink="/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" (click)="closeOffcanvas()">
          Home
        </a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          Alunos
        </a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" routerLink="/alunos" (click)="closeOffcanvas()">Buscar Alunos</a></li>
          <li><a class="dropdown-item" routerLink="/alunos/novo" (click)="closeOffcanvas()">Cadastrar Aluno</a></li>
        </ul>
      </li>
       <li class="nav-item">
        <a class="nav-link" routerLink="/relatorios" routerLinkActive="active" (click)="closeOffcanvas()">
          Relatórios
        </a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          Administração
        </a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" routerLink="/cursos" (click)="closeOffcanvas()">Gerenciar Cursos</a></li>
          <li><a class="dropdown-item" routerLink="/turmas" (click)="closeOffcanvas()">Gerenciar Turmas</a></li>
          <li><a class="dropdown-item" routerLink="/diagnosticos" (click)="closeOffcanvas()">Diagnósticos</a></li>
          <li><a class="dropdown-item" routerLink="/tipos-atendimento" (click)="closeOffcanvas()">Tipos de Atendimento</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" routerLink="/usuarios" (click)="closeOffcanvas()">Gerenciar Usuários</a></li>
        </ul>
      </li>
    </ul>

    <ul class="navbar-nav navbar-profile offcanvas-footer" *ngIf="currentUser$ | async as user">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-person fs-5 me-2"></i>
          <span>
            <small>Logado como</small>
            {{ user.nome }}
          </span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" routerLink="/perfil" (click)="closeOffcanvas()"><i class="bi bi-person-lines-fill me-2"></i> Ver perfil</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" (click)="logoutAndCloseOffcanvas()"><i class="bi bi-box-arrow-right me-2"></i> Sair</a></li>
        </ul>
      </li>
    </ul>
  </div>
</div>

<main class="main-content-area">
  <router-outlet></router-outlet>
</main>
